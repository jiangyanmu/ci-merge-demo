### Git 合併策略深度比較

| 合併策略 (Merge Strategy) | 優點 (Pros) | 缺點 (Cons) | 歷史外觀 (Resulting History) | 您的倉庫範例 (Repo Example) | CI/CD 行為 (CI/CD Behavior) |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **🔀 Merge Commit**<br>(合併提交) | **1. 完全保留歷史**：不改寫任何提交，保留分支的完整上下文。<br>**2. 可追溯性強**：清楚地知道每個功能分支何時被合併。 | **1. 歷史混亂**：當分支多時，提交歷史會變得非常複雜，像義大利麵條。<br>**2. `main` 分支閱讀性差**。 | **非線性 (Non-linear)**。<br>用一個新的「合併提交」來連接兩個分支，像高速公路的交流道。 | **合併提交**: `106b96e`<br>**原始提交**: `012de09` | **運行兩次**：<br>1. 在 PR 階段運行。<br>2. 合併後，在 `main` 分支上**再次運行**。 |
| **🧼 Squash & Merge**<br>(壓縮合併) | **1. `main` 分支乾clean**：歷史非常簡潔，每個 PR 只對應一個提交。<br>**2. 易於理解**：容易看出每個功能是什麼時候加入的。 | **1. 丟失開發細節**：不利於後續詳細的 Code Review。<br>**2. 難以還原小改動**：合併後想撤銷某個小改動會比較困難。 | **線性 (Linear)**。<br>將分支上所有提交「壓扁」成一個全新的提交。 | (待演示) | **運行兩次**：<br>1. 在 PR 階段運行。<br>2. 合併後，在 `main` 分支上**再次運行**。 |
| **📈 Rebase & Merge**<br>(變基合併) | **1. 極致乾淨**：歷史完全呈一條直線，是可讀性最高的歷史。<br>**2. 保留提交細節**：與 Squash 不同，它保留了分支中有意義的提交。 | **1. 改寫歷史**：對新手不友好，有風險，協作時容易出錯。<br>**2. 可能丟失分支時間點**：無法輕易看出功能是何時開始開發的。 | **線性 (Linear)**。<br>將分支上的提交「搬家」到 `main` 分支的頂端。 | (待演示) | **可能運行多次**：<br>1. 在 PR 階段運行。<br>2. 合併到 `main` 時，每個被重新應用的提交都**可能觸發一次** CI。 |
| **🚀 Fast-Forward**<br>(快進合併) | **1. 最純粹的線性**：沒有任何額外操作，只是移動指針。<br>**2. 高效**：沒有額外的計算或 commit 生成。 | **1. 條件苛刻**：僅在 `main` 分支沒有新提交時才能發生，不適用於多人頻繁協作的場景。 | **線性 (Linear)**。<br>直接將 `main` 指針「快進」到分支的頂端。 | (待演示) | **只運行一次**：<br>僅在 PR 階段運行。合併時因為沒有新提交，`main` 分支的 CI **不會**再次運行。 |
